![](../docs/USAGE.png)

# aws-terraform-sandbox サンドボックス環境

このディレクトリには、AWS上でStreamlitアプリケーションをデプロイするための様々なTerraformスクリプトが含まれています。各サンドボックス環境は、異なる設定と機能を提供し、AWSインフラストラクチャの構築方法を学ぶのに役立ちます。

## サンドボックス環境

### s01_streamlit_aws_setup

このサンドボックスでは、以下のAWSリソースを作成します：

- VPC
- パブリックサブネット
- インターネットゲートウェイ
- ルートテーブル
- セキュリティグループ
- EC2インスタンス（Streamlitアプリケーションをホスト）
- Elastic IP

主な特徴：
- 基本的なStreamlitアプリケーションのデプロイ
- シンプルなネットワーク構成
- 手動での起動と停止

### s02_streamlit_aws_deployer

このサンドボックスでは、以下のAWSリソースを作成します：

- VPC
- パブリックサブネット
- インターネットゲートウェイ
- ルートテーブル
- セキュリティグループ
- EC2インスタンス（Streamlitアプリケーションをホスト）
- Elastic IP
- CloudWatchイベントルール（インスタンスの起動/停止）
- IAMロール（EC2インスタンス用、CloudWatchイベント用）
- IAMポリシー（EC2インスタンス用）
- IAMインスタンスプロファイル
- セッションマネージャーの設定

主な特徴：
- より高度なStreamlitアプリケーションのデプロイ
- 自動的な起動/停止スケジュール（平日の朝8時に起動、正午に停止）
- セッションマネージャーを使用したリモートアクセス
- 変数を使用したカスタマイズ可能な設定

## 使用方法

各サンドボックス環境を使用するには、以下の手順に従ってください：

1. 目的のサンドボックスディレクトリに移動します：
   ```
   cd s01_streamlit_aws_setup
   ```
   または
   ```
   cd s02_streamlit_aws_deployer
   ```

2. Terraformを初期化します：
   ```
   terraform init
   ```

3. 必要に応じて、`terraform.tfvars`ファイルを編集してカスタム設定を行います。

4. Terraformプランを確認します：
   ```
   terraform plan
   ```

5. リソースをデプロイします：
   ```
   terraform apply
   ```

6. デプロイが完了したら、出力されたパブリックIPアドレスを使用してStreamlitアプリケーションにアクセスします。

7. 使用が終わったら、リソースを削除します：
   ```
   terraform destroy
   ```

## 注意事項

- AWSの料金が発生する可能性があるため、使用しないリソースは必ず削除してください。
- セキュリティグループの設定を確認し、必要に応じて調整してください。
- 実際の本番環境では、より堅牢なセキュリティ設定が必要です。これらのサンドボックス環境は学習目的で設計されています。

## カスタマイズ

各サンドボックス環境は、`variables.tf`ファイルで定義された変数を使用してカスタマイズできます。必要に応じて、これらの変数の値を`terraform.tfvars`ファイルで上書きしてください。

詳細なカスタマイズオプションについては、各サンドボックスディレクトリ内のREADMEファイルを参照してください。
